---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import PostCard from '@/components/PostCard.astro';
import { getCollection } from 'astro:content';


const tag = Astro.params.tag!;
const posts = (await getCollection('writeups'))
.filter(p => p.data.tags?.includes(tag))
.sort((a,b)=> +new Date(b.data.date) - +new Date(a.data.date));
---
<BaseLayout title={`#${tag} â€” Writeups`}>
<Fragment slot="header"><Header /></Fragment>
<section class="container py-8">
<h1 class="text-2xl font-semibold">Tag: #{tag}</h1>
<div class="grid md:grid-cols-2 gap-4 mt-6">
{posts.map((post) => (
<PostCard post={post} />
))}
</div>
</section>
<Fragment slot="footer"><Footer /></Fragment>
</BaseLayout>